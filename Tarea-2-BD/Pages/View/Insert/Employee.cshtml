@page
@model Tarea_2_BD.Pages.View.Insert.EmployeeModel
@{
	var successMessage = Model.SuccessMessage;
}


@if (!string.IsNullOrEmpty(successMessage))
{
	<div class="alert alert-success">
		@successMessage
	</div>
}

<br>
<h2>Lista de empleados</h2>

<form method="POST">

    <div>
        <input type="text" name="Filtrar" value="" />
        <label>&nbsp;</label>
        <input type="submit" value="Filtrar" class="submit" onclick="@Model.FiltraUsuarios"/>
    </div>


	<table class="table">
		<thead>
			<tr>
				<th>Nombre</th>
				<th>Valor documento identidad</th>
				<th>Saldo Vacaciones</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var item in Model.listaEmpleados)
			{
				<tr data-id="@item.Nombre" class="selectable-row">
					<td>@item.Nombre</td>
					<td>@item.ValorDocumentoIdentidad</td>
					<td>@item.SaldoVacaciones</td>
				</tr>
			}
		</tbody>
	</table>
	<input type="hidden" name="selectedId" id="selectedId" />
</form>
<br />

@section Scripts {
    <script>
        let selectedId = null;

        document.querySelectorAll('.selectable-row').forEach(row => {
            row.addEventListener('click', function () {
                const id = this.getAttribute('data-id');

                // Desmarcar la fila seleccionada previamente
                if (selectedId) {
                    const previousRow = document.querySelector(`.selectable-row[data-id="${selectedId}"]`);
                    if (previousRow) {
                        previousRow.classList.remove('selected');
                    }
                }

                // Marcar la nueva fila seleccionada
                if (selectedId !== id) {
                    selectedId = id;
                    this.classList.add('selected');
                } else {
                    selectedId = null; // Deselecciona si se hace clic de nuevo
                }

                // Actualizar el campo oculto
                document.getElementById('selectedId').value = selectedId;
            });
        });
    </script>

    <style>
        .selectable-row {
            cursor: pointer;
        }
        .selectable-row.selected {
            background-color: #d1e7dd;
        }
    </style>
}
